karuta randomization toy thing

<html><head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>ricardo karuta memory practice</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="robots" content="noindex, nofollow">
    <meta name="googlebot" content="noindex, nofollow">
    <meta name="viewport" content="width=device-width, initial-scale=1">



    <script type="text/javascript" src="/js/lib/dummy.js"></script>



    <style id="compiled-css" type="text/css">
      .field-parent {
  display:flex;
}

#tekijin .field {
  flex-direction: column;
}

#tekijin .card {
  transform: rotate(180deg);
}

.field {
  writing-mode: horizontal-tb;
  display: flex;
  flex-direction: column-reverse;
}

.sub {
  display:flex;
  padding: 0.2em;
}

.laligned {
  align-items: flex-end;
  padding-left: 2em;
}

#tekijin .laligned {
  padding-left: 10em
}

.card {
  border: solid;
  border-color: forestgreen;
  
  -webkit-writing-mode: vertical-rl;
  -moz-writing-mode: vertical-rl;
  -ms-writing-mode: vertical-rl;
  writing-mode: vertical-rl;
  
  display:flex;
  flex-direction: column;
  
  /* transform: rotate(180deg); */
}


      /* EOS */
    </style>

    <style type="text/css">
      :root {
        color-scheme: light;
      }
    </style>

  </head>
  <body>
    <div class="field-parent" id="tekijin">
  <div class="field">
    <div class="sub" id="japan"><div class="card"><div>わかころも</div><div>てはつゆに</div><div>ぬれつつ</div></div><div class="card"><div>ころもほす</div><div>てふあまの</div><div>かくやま</div></div><div class="card"><div>なかなかし</div><div>よをひとり</div><div>かもねむ</div></div><div class="card"><div>ふしのたか</div><div>ねにゆきは</div><div>ふりつつ</div></div><div class="card"><div>こゑきくと</div><div>きそあきは</div><div>かなしき</div></div><div class="card"><div>しろきをみ</div><div>れはよそふ</div><div>けにける</div></div></div>
    <div class="sub" id="castle"><div class="card"><div>みかさのや</div><div>まにいてし</div><div>つきかも</div></div><div class="card"><div>よをうちや</div><div>まとひとは</div><div>いふなり</div></div><div class="card"><div>わかみよに</div><div>ふるなかめ</div><div>せしまに</div></div><div class="card"><div>しるもしら</div><div>ぬもあふさ</div><div>かのせき</div></div></div>
    <div class="sub" id="teotihuacan"><div class="card"><div>ひとにはつ</div><div>けよあまの</div><div>つりふね</div></div><div class="card"><div>をとめのす</div><div>かたしはし</div><div>ととめむ</div></div><div class="card"><div>こひそつも</div><div>りてふちと</div><div>なりぬる</div></div></div>
  </div>
  <div class="field laligned">
    <div class="sub" id="concrete"><div class="card"><div>みたれそめ</div><div>にしわれな</div><div>らなくに</div></div><div class="card"><div>わかころも</div><div>てにゆきは</div><div>ふりつつ</div></div><div class="card"><div>まつとしき</div><div>かはいまか</div><div>へりこむ</div></div><div class="card"><div>からくれな</div><div>ゐにみつく</div><div>くるとは</div></div><div class="card"><div>ゆめのかよ</div><div>ひちひとめ</div><div>よくらむ</div></div></div>
    <div class="sub" id="palace"><div class="card"><div>あはてこの</div><div>よをすくし</div><div>てよとや</div></div><div class="card"><div>みをつくし</div><div>てもあはむ</div><div>とそおもふ</div></div><div class="card"><div>ありあけの</div><div>つきをまち</div><div>いてつるかな</div></div><div class="card"><div>むへやまか</div><div>せをあらし</div><div>といふらむ</div></div></div>
    <div class="sub" id="solarpunk"><div class="card"><div>わかみひと</div><div>つのあきに</div><div>はあらねと</div></div><div class="card"><div>もみちのに</div><div>しきかみの</div><div>まにまに</div></div><div class="card"><div>ひとにしら</div><div>れてくるよ</div><div>しもかな</div></div></div>
  </div>
</div>
<p>
</p>
<div class="field-parent" id="jijin">
  <div class="field">
    <div class="sub" id="jungle"><div class="card"><div>いまひとた</div><div>ひのみゆき</div><div>またなむ</div></div><div class="card"><div>いつみきと</div><div>てかこひし</div><div>かるらむ</div></div><div class="card"><div>ひとめもく</div><div>さもかれぬ</div><div>とおもへは</div></div><div class="card"><div>おきまとは</div><div>せるしらき</div><div>くのはな</div></div><div class="card"><div>あかつきは</div><div>かりうきも</div><div>のはなし</div></div></div>
    <div class="sub" id="prairie"><div class="card"><div>よしののさ</div><div>とにふれる</div><div>しらゆき</div></div><div class="card"><div>なかれもあ</div><div>へぬもみち</div><div>なりけり</div></div><div class="card"><div>しつこころ</div><div>なくはなの</div><div>ちるらむ</div></div><div class="card"><div>まつもむか</div><div>しのともな</div><div>らなくに</div></div></div>
    <div class="sub" id="desert"><div class="card"><div>はなそむか</div><div>しのかにに</div><div>ほひける</div></div><div class="card"><div>くものいつ</div><div>こにつきや</div><div>とるらむ</div></div></div>
  </div>
  <div class="field">
    <div class="sub" id="spaceship"><div class="card"><div>つらぬきと</div><div>めぬたまそ</div><div>ちりける</div></div><div class="card"><div>ひとのいの</div><div>ちのをしく</div><div>もあるかな</div></div><div class="card"><div>あまりてな</div><div>とかひとの</div><div>こひしき</div></div></div>
  </div>
  <div class="field laligned">
    <div class="sub" id="pines"><div class="card"><div>ものやおも</div><div>ふとひとの</div><div>とふまて</div></div><div class="card"><div>ひとしれす</div><div>こそおもひ</div><div>そめしか</div></div><div class="card"><div>すゑのまつ</div><div>やまなみこ</div><div>さしとは</div></div><div class="card"><div>むかしはも</div><div>のをおもは</div><div>さりけり</div></div><div class="card"><div>ひとをもみ</div><div>をもうらみ</div><div>さらまし</div></div></div>
    <div class="sub" id="stones"><div class="card"><div>みのいたつ</div><div>らになりぬ</div><div>へきかな</div></div><div class="card"><div>ゆくへもし</div><div>らぬこひの</div><div>みちかな</div></div><div class="card"><div>ひとこそみ</div><div>えねあきは</div><div>きにけり</div></div><div class="card"><div>くたけても</div><div>のをおもふ</div><div>ころかな</div></div></div>
    <div class="sub" id="arctic"><div class="card"><div>ひるはきえ</div><div>つつものを</div><div>こそおもへ</div></div><div class="card"><div>なかくもか</div><div>なとおもひ</div><div>けるかな</div></div></div>
  </div>
</div>
  

    <script type="text/javascript">

function shuffle(array) {
  let currentIndex = array.length;

  // While there remain elements to shuffle...
  while (currentIndex != 0) {

    // Pick a remaining element...
    let randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex--;

    // And swap it with the current element.
    [array[currentIndex], array[randomIndex]] = [
      array[randomIndex], array[currentIndex]];
  }
}

const cards = [
    "わかころもてはつゆにぬれつつ",
    "ころもほすてふあまのかくやま",
    "なかなかしよをひとりかもねむ",
    "ふしのたかねにゆきはふりつつ",
    "こゑきくときそあきはかなしき",
    "しろきをみれはよそふけにける",
    "みかさのやまにいてしつきかも",
    "よをうちやまとひとはいふなり",
    "わかみよにふるなかめせしまに",
    "しるもしらぬもあふさかのせき",
    "ひとにはつけよあまのつりふね",
    "をとめのすかたしはしととめむ",
    "こひそつもりてふちとなりぬる",
    "みたれそめにしわれならなくに",
    "わかころもてにゆきはふりつつ",
    "まつとしきかはいまかへりこむ",
    "からくれなゐにみつくくるとは",
    "ゆめのかよひちひとめよくらむ",
    "あはてこのよをすくしてよとや",
    "みをつくしてもあはむとそおもふ",
    "ありあけのつきをまちいてつるかな",
    "むへやまかせをあらしといふらむ",
    "わかみひとつのあきにはあらねと",
    "もみちのにしきかみのまにまに",
    "ひとにしられてくるよしもかな",
    "いまひとたひのみゆきまたなむ",
    "いつみきとてかこひしかるらむ",
    "ひとめもくさもかれぬとおもへは",
    "おきまとはせるしらきくのはな",
    "あかつきはかりうきものはなし",
    "よしののさとにふれるしらゆき",
    "なかれもあへぬもみちなりけり",
    "しつこころなくはなのちるらむ",
    "まつもむかしのともならなくに",
    "はなそむかしのかににほひける",
    "くものいつこにつきやとるらむ",
    "つらぬきとめぬたまそちりける",
    "ひとのいのちのをしくもあるかな",
    "あまりてなとかひとのこひしき",
    "ものやおもふとひとのとふまて",
    "ひとしれすこそおもひそめしか",
    "すゑのまつやまなみこさしとは",
    "むかしはものをおもはさりけり",
    "ひとをもみをもうらみさらまし",
    "みのいたつらになりぬへきかな",
    "ゆくへもしらぬこひのみちかな",
    "ひとこそみえねあきはきにけり",
    "くたけてものをおもふころかな",
    "ひるはきえつつものをこそおもへ",
    "なかくもかなとおもひけるかな",
    "さしもしらしなもゆるおもひを",
    "なほうらめしきあさほらけかな",
    "いかにひさしきものとかはしる",
    "けふをかきりのいのちともかな",
    "なこそなかれてなほきこえけれ",
    "いまひとたひのあふこともかな",
    "くもかくれにしよはのつきかな",
    "いてそよひとをわすれやはする",
    "かたふくまてのつきをみしかな",
    "またふみもみすあまのはしたて",
    "けふここのへににほひぬるかな",
    "よにあふさかのせきはゆるさし",
    "ひとつてならていふよしもかな",
    "あらはれわたるせせのあしろき",
    "こひにくちなむなこそをしけれ",
    "はなよりほかにしるひともなし",
    "かひなくたたむなこそをしけれ",
    "こひしかるへきよはのつきかな",
    "たつたのかはのにしきなりけり",
    "いつこもおなしあきのゆふくれ",
    "あしのまろやにあきかせそふく",
    "かけしやそてのぬれもこそすれ",
    "とやまのかすみたたすもあらなむ",
    "はけしかれとはいのらぬものを",
    "あはれことしのあきもいぬめり",
    "くもゐにまかふおきつしらなみ",
    "われてもすゑにあはむとそおもふ",
    "いくよねさめぬすまのせきもり",
    "もれいつるつきのかけのさやけさ",
    "みたれてけさはものをこそおもへ",
    "たたありあけのつきそのこれる",
    "うきにたへぬはなみたなりけり",
    "やまのおくにもしかそなくなる",
    "うしとみしよそいまはこひしき",
    "ねやのひまさへつれなかりけり",
    "かこちかほなるわかなみたかな",
    "きりたちのほるあきのゆふくれ",
    "みをつくしてやこひわたるへき",
    "しのふることのよわりもそする",
    "ぬれにそぬれしいろはかはらす",
    "ころもかたしきひとりかもねむ",
    "ひとこそしらねかわくまもなし",
    "あまのをふねのつなてかなしも",
    "ふるさとさむくころもうつなり",
    "わかたつそまにすみそめのそて",
    "ふりゆくものはわかみなりけり",
    "やくやもしほのみもこかれつつ",
    "みそきそなつのしるしなりける",
    "よをおもふゆゑにものおもふみは",
    "なほあまりあるむかしなりけり"
]

//shuffle(cards);

const splitCards = cards.map( card => [
			card.slice(0, 5), // right column characters
			card.slice(5, 10), // middle column characters
			card.slice(10), // left column characters
		]);

const halfTheCards = splitCards.slice(0, 50);
const structuredCards =
	{
  ['japan']: halfTheCards.slice(0,6),
  ['castle']: halfTheCards.slice(6,10),
  ['teotihuacan']: halfTheCards.slice(10, 13),
  ['concrete']: halfTheCards.slice(13, 18),
  ['palace']: halfTheCards.slice(18, 22),
  ['solarpunk']: halfTheCards.slice(22, 25),
  
  ['jungle']: halfTheCards.slice(25, 30),
  ['prairie']: halfTheCards.slice(30, 34),
  ['desert']: halfTheCards.slice(34, 36),
  
  ['spaceship']: halfTheCards.slice(36, 39),
  
  ['pines']: halfTheCards.slice(39, 44),
  ['stones']: halfTheCards.slice(44, 48),
  ['arctic']: halfTheCards.slice(48, 50),
  
  }

for (const [biome, cards] of Object.entries(structuredCards)) {
	cards.forEach(([first, second, third]) => {
	//console.log([first, second, third]);
  const cardEl = document.createElement('div');

	const firstSpan = document.createElement('div');
  const firstText = document.createTextNode(first);
  firstSpan.appendChild(firstText);
  
  const secondSpan = document.createElement('div');
  const secondText = document.createTextNode(second);
  secondSpan.appendChild(secondText);
  
  const thirdSpan = document.createElement('div');
  const thirdText = document.createTextNode(third);
  thirdSpan.appendChild(thirdText);
  
  [firstSpan, secondSpan, thirdSpan]
  	.forEach(span => {cardEl.appendChild(span);})
  const place = document.querySelector(`#${biome}`);
  
  cardEl.classList.add('card');

  // add the text node to the newly created div
  cardEl.appendChild(firstSpan);
  cardEl.appendChild(secondSpan);
  cardEl.appendChild(thirdSpan);

  // Add element to list
	place.appendChild(cardEl)
})
}



  </script>

  <script>
    // tell the embed parent frame the height of the content
    if (window.parent && window.parent.parent){
      window.parent.parent.postMessage(["resultsFrame", {
        height: document.body.getBoundingClientRect().height,
        slug: ""
      }], "*")
    }

    // always overwrite window.name, in case users try to set it manually
    window.name = "result"
  </script>

  <script>
    const allLines = []
    const cssElement = document.querySelector("#compiled-css")

    window.addEventListener("message", (message) => {
        if (message.data.console){
          let insert = document.querySelector("#insert")
          allLines.push(message.data.console.payload)
          insert.innerHTML = allLines.join(";\r")

          let result = eval.call(null, message.data.console.payload)
          if (result !== undefined){
            console.log(result)
          }
        }

      if (message.data.css){
        cssElement.textContent = message.data.css.payload
      }

      if (message.data.html){
        document.body.innerHTML = message.data.html.payload
      }
    })
  </script>
</body></html>

